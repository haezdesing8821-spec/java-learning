# Tutorial De Java - Session 6. / Tipos De datos

## 06.1 Type Casting en java

## ¿Qué es?

En Java, `type casting` (conversión de tipos) es el proceso mediante el cual podemos convertir de valor de un tipo de dato a otro.

Existen dos tipos principales:

    1. Type Casting Implícito (Widening Casting).

    2. Type Casting Explícito (Narrowing Casting).

### 1. Type Casting Implícito (`Widening Casting`)

Ocurre automáticamente cuando se convierte un tipo más pequeño a uno más grande (sin pérdida de datos).

Ejemplo: `int` → `long` → `float` → `double`.

```java
public class WideningCasting {
    public static void main(String[] args) {
        int numInt = 42;
        double numDouble = numInt; // Conversión automática (int → double)

        System.out.println("Entero: " + numInt);
        System.out.println("Double: " + numDouble);
    }
}
```

### 2. Type Casting Explícito (`Narrowing Casting`)

Se hace manualmente cuando se convierte un tipo más grande a uno más pequeño. Puede provocar pérdida de datos o desbordamiento.

Ejemplo: `double` → `float` → `long` → `int` → `short` → `byte`.

```java
public class NarrowingCasting {
    public static void main(String[] args) {
        double numDouble = 42.99;
        int numInt = (int) numDouble; // Conversión manual (double → int)

        System.out.println("Double original: " + numDouble);
        System.out.println("Entero convertido: " + numInt);
    }
}
```
### 3. Type Casting entre Objetos

En Java, también se puede hacer casting entre objetos, pero solo si hay relación de herencia.

En Java, el type casting entre objetos se refiere a convertir una referencia de un tipo de objeto a otro dentro de una jerarquía de herencia.
Esto es diferente del casting entre tipos primitivos y se aplica solo a tipos de referencia.

```java
class Animal {
    void sonido() { System.out.println("Sonido genérico"); }
}

class Perro extends Animal {
    void sonido() { System.out.println("Guau!"); }
}

public class ObjectCasting {
    public static void main(String[] args) {
        Animal a = new Perro(); // Upcasting (implícito)
        a.sonido();

        // Downcasting (explícito)
        if (a instanceof Perro) {
            Perro p = (Perro) a;
            p.sonido();
        }
    }
}
```

### Conceptos clave

**Upcasting (`casting ascendente`):**

Convertir un objeto de una subclase a una referencia de su superclase.
Es implícito y seguro, ya que la subclase siempre es un tipo de la superclase.

**Downcasting (`casting descendente`):**

Convertir una referencia de superclase a una subclase.
Es explícito y puede lanzar ClassCastException si el objeto no es realmente de ese tipo.

```java
// Ejemplo de type casting entre objetos en Java
class Animal {
    public void hacerSonido() {
        System.out.println("Sonido genérico de animal");
    }
}

class Perro extends Animal {
    public void hacerSonido() {
        System.out.println("Guau guau");
    }
    public void moverCola() {
        System.out.println("Moviendo la cola");
    }
}

public class CastingObjetos {
    public static void main(String[] args) {
        // Upcasting (implícito)
        Animal miAnimal = new Perro(); // Un perro es un animal
        miAnimal.hacerSonido(); // Llama al método sobrescrito de Perro

        // Downcasting (explícito y seguro con instanceof)
        if (miAnimal instanceof Perro) {
            Perro miPerro = (Perro) miAnimal; // Conversión explícita
            miPerro.moverCola(); // Ahora podemos acceder a métodos de Perro
        } else {
            System.out.println("No es un perro, no se puede castear");
        }

        // Ejemplo de error si no se verifica con instanceof
        Animal otroAnimal = new Animal();
        try {
            Perro perroFalso = (Perro) otroAnimal; // Lanza ClassCastException
        } catch (ClassCastException e) {
            System.out.println("Error: " + e.getMessage());
        }
    }
}
```

### Buenas prácticas

    Usar instanceof antes de hacer downcasting para evitar excepciones.

    Preferir polimorfismo en lugar de casting cuando sea posible.

    Evitar downcasting innecesario, ya que puede indicar un diseño poco óptimo.

### ✅ Resumen rápido:

**Implícito (Widening):** Automático, sin pérdida de datos.

**Explícito (Narrowing):** Manual, posible pérdida de datos.

**Objetos:** Solo entre clases relacionadas por herencia:

    Upcasting es automático y seguro.

    Downcasting requiere conversión explícita y verificación previa.

    Siempre validar con instanceof antes de castear.